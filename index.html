<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Hair Tracker">
    <meta name="theme-color" content="#ff9a9e">
    <title>Hair Wash Tracker</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon-152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icon-120.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="icon-32.png">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🛁✨ Hair Wash Tracker ✨🧴</h1>
            <p>🫧 Never forget when you last washed your hair! 🫧</p>
            <div class="header-bubbles">
                <span class="bubble">🫧</span>
                <span class="bubble">💆‍♀️</span>
                <span class="bubble">🫧</span>
                <span class="bubble">🧼</span>
                <span class="bubble">🫧</span>
            </div>
        </header>

        <!-- Main App View -->
        <div id="mainView">
            <!-- Quick Actions -->
            <section class="quick-actions">
                <button id="washTodayBtn" class="btn btn-primary">
                    🛁✨ I Washed My Hair Today! ✨🫧
                </button>
                <button id="openProfileBtn" class="btn btn-secondary profile-btn">
                    💇‍♀️ My Hair Profile
                </button>
                <div class="last-wash-info">
                    <span id="lastWashText">Last wash: Never logged</span>
                </div>
                <div class="next-wash-info">
                    <span id="nextWashText">Set your wash frequency in profile to see next wash reminder! 🛁</span>
                </div>
            </section>

            <!-- Calendar Section -->
            <section class="calendar-section">
                <div class="calendar-header">
                    <button id="prevMonth" class="btn btn-nav">‹</button>
                    <h2 id="currentMonth">January 2024</h2>
                    <button id="nextMonth" class="btn btn-nav">›</button>
                </div>
                <div id="calendar" class="calendar-grid"></div>
            </section>

            <!-- Event Management -->
            <section class="event-section">
                <h3>🎉✨ Upcoming Events ✨🎊</h3>
                <div class="add-event">
                    <input type="date" id="eventDate" class="input">
                    <input type="text" id="eventName" placeholder="🎊 Event name" class="input">
                    <select id="eventType" class="input">
                        <option value="event">🎉 Important Event</option>
                        <option value="wash">🛁 Scheduled Wash</option>
                    </select>
                    <button id="addEventBtn" class="btn btn-secondary">➕✨ Add</button>
                </div>
                <div id="eventsList" class="events-list"></div>
            </section>
        </main>
        </div>

        <!-- Profile Page View -->
        <div id="profileView" class="page-view hidden">
            <header class="profile-page-header">
                <button id="backToMainBtn" class="btn btn-nav back-btn">← Back</button>
                <h1>💇‍♀️✨ My Hair Profile ✨💇‍♂️</h1>
            </header>
            
            <main class="profile-main">
                <div class="profile-grid">
                    <div class="profile-field">
                        <label for="hairType">💁‍♀️ Hair Type:</label>
                        <select id="hairType" class="input">
                            <option value="">Select hair type</option>
                            <option value="straight">Straight</option>
                            <option value="wavy">Wavy</option>
                            <option value="curly">Curly</option>
                            <option value="coily">Coily</option>
                        </select>
                    </div>
                    <div class="profile-field">
                        <label for="hairLength">📏 Hair Length:</label>
                        <select id="hairLength" class="input">
                            <option value="">Select length</option>
                            <option value="short">Short</option>
                            <option value="medium">Medium</option>
                            <option value="long">Long</option>
                            <option value="very-long">Very Long</option>
                        </select>
                    </div>
                    
                    <!-- New Smart Frequency Range -->
                    <div class="profile-field full-width">
                        <label for="washFrequencyRange">🗓️ Smart Wash Frequency:</label>
                        <div class="frequency-range">
                            <div class="range-input">
                                <label>Minimum days between washes:</label>
                                <select id="minFrequency" class="input">
                                    <option value="1">1 day</option>
                                    <option value="2" selected>2 days</option>
                                    <option value="3">3 days</option>
                                    <option value="4">4 days</option>
                                </select>
                            </div>
                            <div class="range-input">
                                <label>Maximum days before must wash:</label>
                                <select id="maxFrequency" class="input">
                                    <option value="2">2 days</option>
                                    <option value="3" selected>3 days</option>
                                    <option value="4">4 days</option>
                                    <option value="5">5 days</option>
                                    <option value="7">7 days</option>
                                </select>
                            </div>
                        </div>
                        <div class="frequency-help">
                            💡 I don't like washing daily, but my hair gets gross after the max days. Always wash one day before events!
                        </div>
                    </div>
                    
                    <div class="profile-field full-width">
                        <label>
                            <input type="checkbox" id="eventWashReminder" checked>
                            🎉 Always wash hair one day before events
                        </label>
                    </div>
                    
                    <div class="profile-field full-width">
                        <label>
                            <input type="checkbox" id="autoScheduleWashes" checked>
                            🤖 Auto-schedule wash days based on frequency
                        </label>
                    </div>
                    
                    <div class="profile-field">
                        <label for="shampoo">🧴 Favorite Shampoo:</label>
                        <input type="text" id="shampoo" placeholder="✨ e.g., Pantene Pro-V" class="input">
                    </div>
                    <div class="profile-field">
                        <label for="conditioner">🌿 Favorite Conditioner:</label>
                        <input type="text" id="conditioner" placeholder="💆‍♀️ e.g., Herbal Essences" class="input">
                    </div>
                    <div class="profile-field">
                        <label for="treatments">🧖‍♀️ Hair Treatments:</label>
                        <input type="text" id="treatments" placeholder="🥥 e.g., Hair mask, oil treatment" class="input">
                    </div>
                    <div class="profile-field full-width">
                        <label for="notes">📝 Hair Care Notes:</label>
                        <textarea id="notes" placeholder="💭 Any special notes about your hair care routine..." class="input textarea"></textarea>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <button id="saveProfile" class="btn btn-primary">💾✨ Save Profile</button>
                    <button id="autoSchedule" class="btn btn-secondary">🗓️🫧 Smart Auto-Schedule</button>
                </div>
            </main>
        </div>
    </div>

    <!-- Notification Permission Modal -->
    <div id="notificationModal" class="modal hidden">
        <div class="modal-content">
            <h3>🔔✨ Enable Cute Reminders? ✨🫧</h3>
            <p>🛁 Get bubbly notifications to remind you when it's time to wash your hair! 💆‍♀️</p>
            <div class="modal-actions">
                <button id="enableNotifications" class="btn btn-primary">🔔 Enable</button>
                <button id="skipNotifications" class="btn btn-secondary">😴 Skip</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    
    <!-- PWA Installation Script -->
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>
